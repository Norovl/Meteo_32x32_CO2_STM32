Данный проект представляет собой метеостанцию с дополнительными возможностями, собранную на основе STM32F103C8T6.

Станция может показывать:

**На главном экране:**

*   Время (часы);
*   Дату (число, месяц, день недели);
*   Температуру и влажность на улице;
*   Температуру и влажность в квартире;
*   Атмосферное давление воздуха (мм.рт.ст.)
*   Содержание СО2 в квартире (тыс.ppm);
*   Часовой график температуры (влажности, давления) на улице и/или температуру (влажность, СО2) в квартире.

**На дополнительных экранах:**

*   Текущую температуру, влажность (относительную и абсолютную), точку росы в квартире и на улице, давление, СО2 с текущим минутным графиком по каждому из показателей;
*   Значение час назад и текущее значение температуры, влажности (относительной и абсолютной), точки росы в квартире и на улице, давления, СО2 с часовым графиком по каждому из показателей;
*   Суточный график с последовательным выводом значения за каждый час суток по следующим показателям: температура, влажность (относительная и абсолютная), точка росы в квартире и на улице, давление, СО2.

**Аппаратный состав проекта:**

([https://aliexpress.ru/item/1005003541972572.html?spm=a2g2w.orderdetail.0.0.49934aa6X7jbTa&sku\_id=12000026227682554&\_ga=2.192225709.602763749.1748060249-1858461858.1585985510](https://aliexpress.ru/item/1005003541972572.html?spm=a2g2w.orderdetail.0.0.49934aa6X7jbTa&sku_id=12000026227682554&_ga=2.192225709.602763749.1748060249-1858461858.1585985510))

![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/image001.jpg)

Состав датчиков:

1.  Два датчика BME280 (температура, влажность, давление). У одного из них нужно перепаять дорожку для изменения адреса подключения;

([https://aliexpress.ru/item/32862445164.html?spm=a2g2w.orderdetail.0.0.24634aa6IzSH7J&sku\_id=10000000058075622&\_ga=2.255525007.602763749.1748060249-1858461858.1585985510](https://aliexpress.ru/item/32862445164.html?spm=a2g2w.orderdetail.0.0.24634aa6IzSH7J&sku_id=10000000058075622&_ga=2.255525007.602763749.1748060249-1858461858.1585985510))  
![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/image002.jpg)

2.  Датчик MH-Z19B (СО2);

([https://aliexpress.ru/item/32371956420.html?sku\_id=12000035236616579&spm=a2g2w.productlist.search\_results.0.7c71c19cK1bYaC](https://aliexpress.ru/item/32371956420.html?sku_id=12000035236616579&spm=a2g2w.productlist.search_results.0.7c71c19cK1bYaC))  
![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/image003.jpg)

3.  Фоторезистор (необязателен) – нужен для автоматической регулировки яркости при изменении внешнего освещения).

([https://aliexpress.ru/item/1005007944797703.html?sku\_id=12000042961408154&spm=a2g2w.productlist.search\_results.1.56b92e913V1ALD](https://aliexpress.ru/item/1005007944797703.html?sku_id=12000042961408154&spm=a2g2w.productlist.search_results.1.56b92e913V1ALD))

![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/image004.jpg)

4.  В качестве панели отображения используются четыре WS2812B PIXELS PANEL размером 8 х 32 пикселей, соединенные сверху вниз, подключенные к контроллеру в нижнем углу (подключение и расположение панелей можно менять в настройках проекта).

([https://aliexpress.ru/item/4000544584524.html?spm=a2g2w.orderdetail.0.0.23ba4aa6R5I62Q&sku\_id=12000032067904150&\_ga=2.163242171.602763749.1748060249-1858461858.1585985510](https://aliexpress.ru/item/4000544584524.html?spm=a2g2w.orderdetail.0.0.23ba4aa6R5I62Q&sku_id=12000032067904150&_ga=2.163242171.602763749.1748060249-1858461858.1585985510))

![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/image005.jpg)

**Схема подключения:**

![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/image006.jpg)

**Управление и настройка метеостанции:**

**Двойное нажатие** \[кн.1\] – в режим установки даты и времени Дальнейшее нажатие \[кн.1\] - последовательное переключение настройки Год – Месяц – Число – Часы – Минуты – Секунды – Корректировка скорости хода часов\*.

![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/24.jpg)

![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/25.jpg)

![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/26.jpg)

![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/27.jpg)

![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/28.jpg)


Выйти из режима настройки - удержание \[кн.1\] или переключение последовательно всех настраиваемых элементов

Установка даты/времени производится путем:

**одинарного нажатия** \[кн.2\] - увеличение на единицу настраиваемое значение;

**удержания** \[кн.2\] - постоянное увеличение настраиваемого значения пока нажата кнопка;

**Двойного нажатия** \[кн.2\] – уменьшение на единицу настраиваемого значения;

**Двойного нажатия и удержания на втором нажатии \[кн.2\]** – постоянное уменьшение настраиваемого значения пока нажата кнопка

\*настройка скорости хода часов (сек/сут) (фактическая корректировка производится на целые секунды, т.е. если корректировка установлена как 0,2, то 1 раз в 5 суток добавляется 1 секунда);

**Пятикратное нажатие** \[кн.2\] – сохраняются настройки вида отображения показаний датчиков и часовых графиков.

**Одинарное нажатие** \[кн.2\] – последовательное переключение показаний в нижней части табло \[currentMode\]:

1.  (показания на улице (Out)) Температура + Влажность + График(и)/давление,

(показания в квартире (In)) Температура + Влажность + График(и)/СО2. (отрицательные значения температуры отображаются синим цветом); \[0\]

	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/0.jpg)

2.  Температура на улице и в квартире до тысячных долей + часовой график; \[1\]

	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/1.jpg)

3.  Относительная влажность на улице и в квартире + часовой график; \[2\]

	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/2.jpg)

4.  Абсолютная влажность на улице и в квартире + часовой график; \[3\]

	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/3.jpg)

5.  Давление до тысячных долей и содержание СО2 в квартире PPM; \[4\]  
    ![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/4.jpg)
	
6.  Точка росы на улице и в квартире + часовой график; \[5\]  
    ![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/5.jpg)

7.  Температура за час (на начало и конец часа) на улице и в квартире; \[10\]  
	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/6.jpg)

8.  Относительная влажность за час (на начало и конец часа) на улице и в квартире; \[11\]  
    ![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/7.jpg)
	
9.  Абсолютная влажность за час (на начало и конец часа) на улице и в квартире; \[12\]
	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/8.jpg)

10.  Давление и содержание СО2 за час (на начало и конец часа); \[13\]
	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/9.jpg)

11.  Точка росы за час (на начало и конец часа) на улице и в квартире; \[14\]
	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/10.jpg)

12.  Суточный график температуры на улице и в квартире с последовательным отображением показаний за каждый час суток\*; \[20\]
	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/11.jpg)

13.  Суточный график относительной влажности на улице и в квартире с последовательным отображением показаний за каждый час суток; \[21\]
	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/12.jpg)

14.  Суточный график абсолютной влажности на улице и в квартире с последовательным отображением показаний за каждый час суток; \[22\]
	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/13.jpg)

15.  Суточный график давления и содержания СО2 с последовательным отображением показаний за каждый час суток; \[23\]
	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/14.jpg)

16.  Суточный график точки росы на улице и в квартире с последовательным отображением показаний за каждый час суток; \[24\]
	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/15.jpg)

\*в суточных графиках добавляется красная метка в нижней части, справа от графика отображается значение показателя (температура In, Out, влажность In, Out, давление, СО2, точка росы In, Out).

**Удержание** \[кн.1\] – автоматическое последовательное переключение показаний в нижней части табло как при одинарном нажатии.

**Одинарное нажатие** \[кн.1\] – переключение показаний в правой части 3 и 4 секции из 4-х:

1.  Часовой график температуры (влажности, давления)\* Out, давление, СО2
	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/0.jpg)
	
2.  Крупно давление, СО2
	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/16.jpg)

3.  Часовой график температуры (влажности, давления) Out, давление, часовой график СО2 (температуры, влажности) In
	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/17.jpg)

4.  Крупно часовой график температуры (влажности, давления) Out, СО2
	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/18.jpg)

5.  Часовой график температуры (влажности, давления) и влажности (давления, температуры) Out, СО2
	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/19.jpg)

6.  Крупно давление, часовой график СО2 (температуры, влажности) In
	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/20.jpg)

7.  Давление, часовой график СО2 (температуры, влажности) и температуры (влажности, СО2) In
	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/21.jpg)

8.  Часовой график температуры (влажности, давления) и влажности (давления, температуры) Out, часовой график СО2 (температуры, влажности) и температуры (влажности, СО2) In
	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/22.jpg)

9.  Крупно часовой график температуры (влажности, давления) Out, часовой график СО2 (температуры, влажности) In
	![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/23.jpg)

\*какой график будет отображаться для графиков Out выбирается двойным нажатием \[кн.2\], для графиков In тройным нажатием \[кн.2\].

**Двойное нажатие** \[кн.2\] – последовательное переключение показаний часовых графиков Out температуры – влажности – давления

**Тройное нажатие** \[кн.2\] – последовательное переключение показаний часовых графиков In температуры – влажности – СО2

**Примечание**: плача чувствительна к качеству питания, поэтому для исключения зависания контроллера питайте плату стабилизированным напряжением 5В.

**Arduino IDE – выбор платы для загрузки:**

![](https://github.com/Norovl/Meteo_32x32_CO2_STM32/blob/main/media/image036.jpg)